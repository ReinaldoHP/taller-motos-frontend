<div class="container text-center mt-5">
  <!-- Título Principal -->
  <h1 class="display-4 fw-bold text-primary">
    <i class="bi bi-tools me-2"></i> Taller de Motos Reinaldo
  </h1>
  <p class="lead text-muted">Gestión eficiente de productos y servicios</p>
</div>

<!-- Resto del contenido -->
<div class="container mt-4">
  <!-- Mensaje de Carga -->
  <div *ngIf="isLoading" class="d-flex justify-content-center align-items-center vh-100">
    <div class="text-center">
      <div class="spinner-border text-primary mb-3" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
      <p class="text-muted">Cargando productos...</p>
    </div>
  </div>

  <!-- Mensajes de Éxito y Error -->
  <div *ngIf="successMessage || errorMessage" class="position-relative">
    <div class="toast-container position-absolute top-0 end-0 p-3">
      <!-- Mensaje de Éxito -->
      <div *ngIf="successMessage" class="toast show bg-success text-white" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header bg-success text-white">
          <strong class="me-auto">Éxito</strong>
          <button type="button" class="btn-close btn-close-white" aria-label="Close" (click)="successMessage = ''"></button>
        </div>
        <div class="toast-body">
          {{ successMessage }}
        </div>
      </div>

      <!-- Mensaje de Error -->
      <div *ngIf="errorMessage" class="toast show bg-danger text-white" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header bg-danger text-white">
          <strong class="me-auto">Error</strong>
          <button type="button" class="btn-close btn-close-white" aria-label="Close" (click)="errorMessage = ''"></button>
        </div>
        <div class="toast-body">
          {{ errorMessage }}
        </div>
      </div>
    </div>
  </div>

  <!-- Lista de Productos -->
  <div *ngIf="!isLoading" class="row">
    <div class="col-md-12">
      <h2 class="mb-4 d-flex align-items-center justify-content-center">
        <i class="bi bi-box-seam me-2"></i> Lista de Productos
      </h2>

      <!-- Tabla de Productos -->
      <table class="table table-striped table-hover">
        <thead class="table-dark">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Nombre</th>
            <th scope="col">Descripción</th>
            <th scope="col">Cantidad</th>
            <th scope="col">Precio</th>
            <th scope="col">Código de Barras</th>
            <th scope="col">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <!-- Mostrar un mensaje si no hay productos -->
          <tr *ngIf="productos.length === 0">
            <td colspan="7" class="text-center text-muted py-4">
              <i class="bi bi-exclamation-circle me-2"></i> No hay productos disponibles.
            </td>
          </tr>

          <!-- Iterar sobre los productos -->
          <tr *ngFor="let producto of productos; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ producto.nombre }}</td>
            <td>{{ producto.descripcion || 'Sin descripción' }}</td>
            <td>{{ producto.cantidad }}</td>
            <td>{{ producto.precio | currency:'USD':'symbol-narrow':'1.2-2' }}</td>
            <td>{{ producto.codigo_barra }}</td>
            <td>
              <div class="btn-group" role="group">
                <button
                  class="btn btn-sm btn-outline-primary"
                  [routerLink]="['/actualizar-producto', producto.id]"
                  title="Editar producto"
                >
                  <i class="bi bi-pencil-square"></i> Editar
                </button>
                <button
                  class="btn btn-sm btn-outline-danger ms-2"
                  (click)="deleteProducto(producto.id)"
                  title="Eliminar producto"
                >
                  <i class="bi bi-trash"></i> Eliminar
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
